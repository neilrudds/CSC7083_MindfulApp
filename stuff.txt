  <!-- Modal - Add new mood log -->
  <div class="modal fade" id="addMoodModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Add a new mood entry</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">

        <form id="moodForm" name="mood" role="form">
          <div class="modal-body">				
            <div class="form-group">
              <div class="mb-3">
                <select class="form-select form-select-lg mb-3" name="moodForm" aria-label=".form-select-lg example" >
                  <option selected>Please select a mood</option>
                  <?php
                    // Prepare GET request for mood types
                    $endpoint = $link . "/api/v1/mood/";

                    // Execute the request
                    $resource = file_get_contents($endpoint);
                    $mooddata = json_decode($resource, true);

                    foreach ($mooddata as $item) { //foreach element in $arr
                      $moodid = $item['mood_id'];
                      $mooddescription = $item['description'];

                      echo "<option value='$moodid'>$mooddescription</option>";
                    }
                  ?>
                </select>
              </div>
            </div>
            <div class="form-group">
              <div class="mb-3">
                <label for="exampleFormControlTextarea1" class="form-label">Comments:</label>
                <textarea class="form-control" name="comment" id="exampleFormControlTextarea1" rows="3"></textarea>
              </div>
            </div>			
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="button" input type="submit" id="submit" class="btn btn-primary">Save changes</button>
          </div>
        </form>
      </div>
    </div>
  </div>


  
  <div class="container">

    <h2>My Moods</h2>

    <div class="card-columns">

      <?php
      $today = new DateTime("today");

      foreach ($userlogdata as $item) { //foreach element in $arr
        $mood_id = $item['mood_log_id'];
        $mooddata = $item['mood_description'];
        $moodhtmlcolour = $item['html_colour'];
        $commentdata = $item['mood_comments']; //etc
        $whendata = $item['entry_timestamp'];

        $formatdate = date("l jS F Y", strtotime($whendata));

        // is there an entry for today
        $diff = $today->diff(new DateTime($formatdate));
        $diffDays = (int)$diff->format("%R%a");

        if ($diffDays === 0) {
          $moodLoggedToday = true;
        }

        echo "<div class='card' style='border-color: #$moodhtmlcolour!important'>
                <div class='card-header' style='background-color: #$moodhtmlcolour; color: #ffffff'>$formatdate</div>
                <div class='card-body'>
                  <h5 class='card-text'>$mooddata</h5>
                  <p class='card-text'><small class='text-muted'>$commentdata</small></p>
                </div>
                <div class='card-footer text-muted' style='text-align: right'>
                  <i class='bi-pencil-square'></i>
                  <a href='#!' class='bi-trash delete' data-id='$mood_id' data-bs-toggle='modal' data-bs-target='#delete-modal'></a>
                </div>
              </div>";
      }
      ?>

    </div>
  </div>

  <?php if (!isset($moodLoggedToday) || $moodLoggedToday !== true) : ?>
    <script type='text/javascript'>
			$(document).ready(function(){
				$("#add-modal").modal("show");
			});
		</script>
  <?php endif; ?>